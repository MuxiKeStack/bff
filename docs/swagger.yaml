definitions:
  evaluation.EndorseReq:
    properties:
      stance:
        type: integer
    type: object
  evaluation.EvaluationVo:
    properties:
      assessments:
        description: 考核方式，支持多选
        items:
          type: string
        type: array
      content:
        type: string
      course_id:
        type: integer
      ctime:
        type: integer
      features:
        description: 课程特点，支持多选
        items:
          type: string
        type: array
      id:
        type: integer
      publisher_id:
        type: integer
      stance:
        type: integer
      star_rating:
        type: integer
      status:
        type: string
      total_comment_count:
        type: integer
      total_oppose_count:
        type: integer
      total_support_count:
        type: integer
      utime:
        type: integer
    type: object
  evaluation.SaveReq:
    properties:
      assessments:
        description: 考核方式，支持多选
        items:
          type: string
        type: array
      content:
        description: 评价的内容
        type: string
      course_id:
        type: integer
      features:
        description: 课程特点，支持多选
        items:
          type: string
        type: array
      id:
        type: integer
      star_rating:
        description: 1，2，3，4，5
        type: integer
      status:
        description: 可见性：Public/Private
        type: string
    type: object
  evaluation.UpdateStatusReq:
    properties:
      status:
        type: string
    type: object
  ginx.Result:
    properties:
      code:
        description: 错误码，非 0 表示失败
        type: integer
      data: {}
      msg:
        description: 错误或成功 描述
        type: string
    type: object
  web.CollectedCourseVo:
    properties:
      collection_id:
        type: integer
      composite_score:
        type: number
      credit:
        type: number
      id:
        type: integer
      is_collected:
        type: boolean
      name:
        type: string
      school:
        type: string
      teacher:
        type: string
      type:
        type: string
    type: object
  web.CommentPublishReq:
    properties:
      biz:
        type: string
      biz_id:
        type: integer
      content:
        type: string
      parent_id:
        type: integer
      root_id:
        type: integer
    type: object
  web.CommentVo:
    properties:
      biz:
        type: string
      biz_id:
        type: integer
      commentator_id:
        type: integer
      content:
        type: string
      ctime:
        type: integer
      id:
        type: integer
      parent_comment_id:
        type: integer
      reply_to_uid:
        type: integer
      root_comment_id:
        type: integer
      utime:
        type: integer
    type: object
  web.CourseCollectReq:
    properties:
      collect:
        type: boolean
    type: object
  web.CourseTagsVo:
    properties:
      assessments:
        additionalProperties:
          type: integer
        description: 标签:数量
        type: object
      features:
        additionalProperties:
          type: integer
        type: object
    type: object
  web.Grade:
    properties:
      final:
        type: number
      regular:
        type: number
      term:
        type: string
      total:
        type: number
      year:
        type: string
    type: object
  web.InviteUserToAnswerReq:
    properties:
      invitees:
        items:
          type: integer
        type: array
    type: object
  web.InviteesVo:
    properties:
      avatar:
        type: string
      nickname:
        type: string
      uid:
        type: integer
    type: object
  web.LoginByCCNUReq:
    properties:
      password:
        description: 密码
        type: string
      student_id:
        description: 学号
        type: string
    type: object
  web.ProfileCourseVo:
    properties:
      evaluated:
        type: boolean
      id:
        type: integer
      name:
        type: string
      teacher:
        type: string
      term:
        description: 学年，1/2/3
        type: string
      year:
        description: 学期，2018
        type: string
    type: object
  web.PublicCourseVo:
    properties:
      assessments:
        additionalProperties:
          type: integer
        description: 标签:数量
        type: object
      composite_score:
        type: number
      credit:
        type: number
      features:
        additionalProperties:
          type: integer
        type: object
      grades:
        items:
          $ref: '#/definitions/web.Grade'
        type: array
      id:
        type: integer
      is_collected:
        type: boolean
      name:
        type: string
      school:
        type: string
      teacher:
        type: string
      type:
        type: string
    type: object
  web.QuestionPublishReq:
    properties:
      biz:
        description: 平台资源类型，如Course
        type: string
      biz_id:
        description: id
        type: integer
      content:
        type: string
    type: object
  web.QuestionVo:
    properties:
      biz:
        description: 具体针对那种业务的提问，如 Course
        type: string
      biz_id:
        type: integer
      content:
        type: string
      ctime:
        type: integer
      id:
        type: integer
      questioner_id:
        description: 提问者用户id
        type: integer
      utime:
        type: integer
    type: object
  web.UserEditReq:
    properties:
      avatar:
        type: string
      nickname:
        type: string
    type: object
  web.UserProfileVo:
    properties:
      avatar:
        type: string
      ctime:
        type: integer
      id:
        type: integer
      new:
        description: 是否为新用户，新用户尚未编辑过个人信息
        type: boolean
      nickname:
        type: string
      studentId:
        type: string
      utime:
        type: integer
    type: object
  web.UserPublicProfileVo:
    properties:
      avatar:
        type: string
      id:
        type: integer
      nickname:
        type: string
    type: object
info:
  contact: {}
paths:
  /comments/{commentId}:
    delete:
      consumes:
      - application/json
      description: 根据评论ID删除评论。
      parameters:
      - description: 评论ID
        in: path
        name: commentId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功删除评论
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: 删除评论
      tags:
      - 评论
  /comments/count:
    get:
      consumes:
      - application/json
      description: 根据业务类型和业务ID计数评论。
      parameters:
      - description: 业务类型
        in: query
        name: biz
        required: true
        type: string
      - description: 业务ID
        in: query
        name: biz_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回评论数
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: integer
              type: object
      summary: 评论数
      tags:
      - 评论
  /comments/list:
    get:
      consumes:
      - application/json
      description: 根据业务类型和业务ID列出一级评论。
      parameters:
      - description: 业务类型
        in: query
        name: biz
        required: true
        type: string
      - description: 业务ID
        in: query
        name: biz_id
        required: true
        type: integer
      - description: 当前评论ID
        in: query
        name: cur_comment_id
        type: integer
      - description: 返回数量限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回评论列表
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/web.CommentVo'
                  type: array
              type: object
      summary: 评论列表[一级]
      tags:
      - 评论
  /comments/publish:
    post:
      consumes:
      - application/json
      description: 根据业务类型、业务ID、rootId，parentId发布评论。
      parameters:
      - description: 发布评论请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/web.CommentPublishReq'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: 发布评论
      tags:
      - 评论
  /comments/replies/list:
    get:
      consumes:
      - application/json
      description: 实际上二级及其以下的所有都拍平到二级进行返回了。
      parameters:
      - description: 根评论ID
        in: query
        name: root_id
        required: true
        type: integer
      - description: 当前评论ID
        in: query
        name: cur_comment_id
        type: integer
      - description: 返回数量限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回评论列表
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/web.CommentVo'
                  type: array
              type: object
      summary: 评论列表[二级]
      tags:
      - 评论
  /courses/{courseId}/collect:
    post:
      consumes:
      - application/json
      description: 根据课程ID，收藏或取消收藏指定课程
      parameters:
      - description: 课程ID
        in: path
        name: courseId
        required: true
        type: integer
      - description: 收藏或取消收藏的请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/web.CourseCollectReq'
      produces:
      - application/json
      responses:
        "200":
          description: 操作成功
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: object
              type: object
      summary: 课程收藏和取消
      tags:
      - 课程
  /courses/{courseId}/detail:
    get:
      consumes:
      - application/json
      description: 根据课程ID获取课程详情信息,包括成绩
      parameters:
      - description: 课程ID
        in: path
        name: courseId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  $ref: '#/definitions/web.PublicCourseVo'
              type: object
      summary: 获取课程详情
      tags:
      - 课程
  /courses/{courseId}/tags:
    get:
      consumes:
      - application/json
      description: 包括课程特点和考核方式
      parameters:
      - description: 课程ID
        in: path
        name: courseId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  $ref: '#/definitions/web.CourseTagsVo'
              type: object
      summary: 获取课程标签
      tags:
      - 课程
  /courses/collections/count/mine:
    get:
      consumes:
      - application/json
      description: 获取用户收藏的课程数量
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回收藏数量
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: integer
              type: object
      summary: 我的收藏数量
      tags:
      - 课程
  /courses/collections/list/mine:
    get:
      consumes:
      - application/json
      description: 获取用户收藏的课程列表，可以分页
      parameters:
      - description: 当前收藏项的ID，用于分页
        in: query
        name: cur_collection_id
        required: true
        type: integer
      - description: 每页数量限制
        in: query
        name: limit
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回收藏列表
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/web.CollectedCourseVo'
                  type: array
              type: object
      summary: 我的收藏列表
      tags:
      - 课程
  /courses/list/mine:
    get:
      consumes:
      - application/json
      description: 获取用户的课程列表
      parameters:
      - description: 年份，格式为YYYY
        in: query
        name: year
        type: string
      - description: 学期，如1、2、3
        in: query
        name: term
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/web.ProfileCourseVo'
                  type: array
              type: object
      summary: 我的课程列表
      tags:
      - 课程
  /evaluations/{evaluationId}/detail:
    get:
      consumes:
      - application/json
      description: 根据课评ID获取详情，详情包括标签
      parameters:
      - description: 课评ID
        in: path
        name: evaluationId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  $ref: '#/definitions/evaluation.EvaluationVo'
              type: object
      summary: 课评详情
      tags:
      - 课评
  /evaluations/{evaluationId}/endorse:
    post:
      consumes:
      - application/json
      description: 根据评价ID支持或反对指定的评价
      parameters:
      - description: 评价ID
        in: path
        name: evaluationId
        required: true
        type: integer
      - description: 支持或反对的请求体，stance为态度标识，-1反对，1支持，0表示无可用于取消表态
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/evaluation.EndorseReq'
      produces:
      - application/json
      responses:
        "200":
          description: 操作成功
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: object
              type: object
      summary: 支持或反对课评
      tags:
      - 课评
  /evaluations/{evaluationId}/status:
    post:
      consumes:
      - application/json
      parameters:
      - description: 变更课评状态请求体
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/evaluation.UpdateStatusReq'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: 变更课评状态
      tags:
      - 课评
  /evaluations/count/courses/{courseId}/invisible:
    get:
      consumes:
      - application/json
      description: 根据课程ID计算该课程的不可见评价数量。
      parameters:
      - description: 课程ID
        in: path
        name: courseId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: integer
              type: object
      summary: 不可见课评数
      tags:
      - 课评
  /evaluations/count/mine:
    get:
      consumes:
      - application/json
      description: 根据用户ID和课评状态分类统计用户的课评数量。
      parameters:
      - description: 课评状态
        in: query
        name: status
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: integer
              type: object
      summary: 用户课评数
      tags:
      - 课评
  /evaluations/list/all:
    get:
      consumes:
      - application/json
      parameters:
      - description: 当前ID
        in: query
        name: cur_evaluation_id
        required: true
        type: integer
      - description: 课评数量限制
        in: query
        name: limit
        required: true
        type: integer
      - description: 用于过滤课评的课程性质（可选）
        in: query
        name: property
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/evaluation.EvaluationVo'
                  type: array
              type: object
      summary: 课评列表[广场]
      tags:
      - 课评
  /evaluations/list/courses/{courseId}:
    get:
      consumes:
      - application/json
      description: 根据课程ID获取课程评价列表，支持分页。
      parameters:
      - description: 课程ID
        in: path
        name: courseId
        required: true
        type: integer
      - description: 当前课评ID
        in: query
        name: cur_evaluation_id
        required: true
        type: integer
      - description: 返回课评的最大数量，上限为100
        in: query
        name: limit
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/evaluation.EvaluationVo'
                  type: array
              type: object
      summary: 课评列表[指定课程]
      tags:
      - 课评
  /evaluations/list/mine:
    get:
      consumes:
      - application/json
      description: 根据课程ID获取课程评价列表，支持分页。
      parameters:
      - description: 课程ID
        in: path
        name: courseId
        required: true
        type: integer
      - description: 当前评估ID，用于分页
        in: query
        name: cur_evaluation_id
        required: true
        type: integer
      - description: 上限为100
        in: query
        name: limit
        required: true
        type: integer
      - description: '课评状态: Public/Private/Folded'
        in: query
        name: status
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/evaluation.EvaluationVo'
                  type: array
              type: object
      summary: 课评列表[我的历史]
      tags:
      - 课评
  /evaluations/save:
    post:
      consumes:
      - application/json
      parameters:
      - description: 发布课评请求体
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/evaluation.SaveReq'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: integer
              type: object
      summary: 发布课评
      tags:
      - 课评
  /questions/{questionId}/detail:
    get:
      consumes:
      - application/json
      description: 通过问题ID检索特定问题的详情。
      parameters:
      - description: 问题ID
        in: path
        name: questionId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  $ref: '#/definitions/web.QuestionVo'
              type: object
      summary: 获取问题详情
      tags:
      - 问题
  /questions/{questionId}/invitees:
    post:
      consumes:
      - application/json
      description: 邀请一个或多个用户回答特定问题。
      parameters:
      - description: 问题ID
        in: path
        name: questionId
        required: true
        type: integer
      - description: 邀请回答问题请求体
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/web.InviteUserToAnswerReq'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: 邀请回答问题
      tags:
      - 问题
  /questions/{questionId}/recommendation_invitees:
    get:
      consumes:
      - application/json
      description: 为特定问题检索推荐的邀请人列表。
      parameters:
      - description: 问题ID
        in: path
        name: questionId
        required: true
        type: integer
      - default: 10
        description: 邀请人数限制
        in: query
        name: limit
        required: true
        type: integer
      - default: 0
        description: 当前id，游标的感觉
        in: query
        name: cur_uid
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/web.InviteesVo'
                  type: array
              type: object
      summary: 获取推荐邀请人
      tags:
      - 问题
  /questions/publish:
    post:
      consumes:
      - application/json
      parameters:
      - description: 发布问题请求体
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/web.QuestionPublishReq'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  type: integer
              type: object
      summary: 发布新问题
      tags:
      - 问题
  /users/:userId/profile:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  $ref: '#/definitions/web.UserPublicProfileVo'
              type: object
      summary: 获取用户信息[公开]
      tags:
      - 用户
  /users/edit:
    post:
      consumes:
      - application/json
      parameters:
      - description: 编辑用户信息请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/web.UserEditReq'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: 编辑个人信息
      tags:
      - 用户
  /users/login_ccnu:
    post:
      consumes:
      - application/json
      description: 通过学号和密码进行登录认证
      parameters:
      - description: 登录请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/web.LoginByCCNUReq'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: ccnu登录
      tags:
      - 用户
  /users/logout:
    post:
      consumes:
      - application/json
      description: 通过短token登出
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: 登出(销毁token)
      tags:
      - 用户
  /users/profile:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/ginx.Result'
            - properties:
                data:
                  $ref: '#/definitions/web.UserProfileVo'
              type: object
      summary: 获取用户信息[自己]
      tags:
      - 用户
  /users/refresh_token:
    get:
      consumes:
      - application/json
      description: 通过长token刷新短token
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ginx.Result'
      summary: 刷新短token
      tags:
      - 用户
swagger: "2.0"
